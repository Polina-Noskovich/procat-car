{% extends 'layout.html' %}
{% load static %}
{% block urlContent %}

<section class="hero-section">
    <div class="hero-content">
        <h1 id="hero-title">Step into Your Dream Car Tomorrow</h1>
        <p>Explore our exclusive collection of luxury cars and drive away with ease</p>
        {% if user.is_authenticated %}
        <a href="{% url 'car_list' %}" class="cta-button">Browse Our Models</a>
        {% else %}
        <a href="{% url 'login' %}" class="cta-button">Browse Our Models</a>
        {% endif %}
    </div>
    <div id="countdown" class="countdown-timer">55</div> <!-- Блок для обратного отсчета -->
</section>

<script>
    // Функция синтеза речи
    function speak(text) {
        if ('speechSynthesis' in window) {
            const utterance = new SpeechSynthesisUtterance(text); // объект в Web Speech API, который используется для представления текста
            utterance.lang = 'ru-RU'; // Устанавливаем язык
            speechSynthesis.speak(utterance);
        } else {
            console.error("Синтез речи не поддерживается вашим браузером.");
        }
    }

    // Функция обратного отсчета
    function startCountdown() {
        const countdownElement = document.getElementById("countdown");
        const oneHour = 60 * 60 * 1000; // 1 час в миллисекундах
        const now = new Date().getTime(); // текущее время в миллисекундах с 1 января 1970 года
        
        // Проверка, есть ли время начала в localStorage и не истек ли таймер
        let startTime = localStorage.getItem("countdownStartTime"); //веб-хранилище, которое позволяет сохранять данные в браузере пользователя без срока давности
        if (!startTime || now >= parseInt(startTime) + oneHour) {
            // Если нет начального времени или таймер истек, устанавливаем текущее время как новое начало
            startTime = now;
            localStorage.setItem("countdownStartTime", startTime);
            speak("Таймер запущен"); // Синтезируем текст
        }
        
        const endTime = parseInt(startTime) + oneHour;
    
        function updateCountdown() {
            const currentTime = new Date().getTime();
            const timeLeft = endTime - currentTime; // оставшееся время до окончания таймера
    
            if (timeLeft > 0) {
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60)); // округляет полученное значение до ближайшего целого числа вниз
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                countdownElement.innerHTML = `Time left: ${minutes}m ${seconds}s`;
            } else {
                countdownElement.innerHTML = "Countdown ended!";
                clearInterval(countdownInterval);
                localStorage.removeItem("countdownStartTime"); // Очистка localStorage после окончания
            }
        }
    
        updateCountdown();
        // Каждую секунду вызываем функцию updateCountdown, чтобы обновить обратный отсчет
        const countdownInterval = setInterval(updateCountdown, 1000);
    }

    // Добавляем синтез речи на заголовок
    document.getElementById("hero-title").addEventListener("click", () => {
        speak("Добро пожаловать на сайт Проката Автомобилей - Сделай шаг к машине своей мечты");
    });

    // Запускаем обратный отсчет при загрузке страницы
    document.addEventListener("DOMContentLoaded", startCountdown);
</script>






<hr class="divider">
<section class="car-section" id="models">
    <h2 style="font-family: 'Didot', serif; font-weight: lighter; letter-spacing: 0.4em; font-size: 2.5em; color: rgba(255, 255, 255, 0.815); text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1); margin-bottom: 20px;">
      Популярные модели
  </h2>
  
    
    <div class="car-model">
        <a href="{% url 'car_list' %}">
            <img src="/media/static/Porsche911.jpg" alt="Porsche 911">
        </a>
        <div class="car-info">
            <a href="{% url 'car_list' %}">
                <h3>Porsche 911</h3>
            </a>
            <p>От €1,664 / час</p>
        </div>
    </div>
  
    <div class="car-model">
        <a href="{% url 'car_list' %}">
            <img src="/media/static/mazz_1.jpg" alt="Maserati Ghibli">
        </a>
        <div class="car-info">
            <a href="{% url 'car_list' %}">
                <h3>Maserati Ghibli</h3>
            </a>
            <p>От €1,482 / час</p>
        </div>
    </div>
  
    <div class="car-model">
        <a href="{% url 'car_list' %}">
            <img src="/media/static/sportcar.jpg" alt="McLaren">
        </a>
        <div class="car-info">
            <a href="{% url 'car_list' %}">
                <h3>McLaren 560C</h3>
            </a>
            <p>От €1,134 / час</p>
        </div>
    </div>
  </section>



  <br><hr class="divider"><br>
  <!-- <br><hr class="divider"><article class="foto"></article><hr class="divider"><br> -->
  <div class="slider">
    <div class="slides">
        <div class="slide" data-link="">
            <img src="/media/static/hah_1.jpg" alt="Реклама компании 1">
            <p>Баннер 1</p>
        </div>
        <div class="slide" data-link="">
            <img src="/media/static/sl1.jpg" alt="Реклама компании 2">
            <p>Баннер 2</p>
        </div>
        <div class="slide" data-link="">
            <img src="/media/static/sl2.jpg" alt="Реклама компании 3">
            <p>Баннер 3</p>
        </div>
    </div>
    <button class="prev">&#10094;</button>
    <button class="next">&#10095;</button>
    <div class="pagination"></div>
    <div class="slide-count">1 / 3</div>
</div>
<hr class="divider">

<!-- Форма для настройки параметров -->
<h3 style ="font-size: 2em; font-family: 'Didot', serif; font-weight: lighter; letter-spacing: 0.3em; color:#f9f9f9; ">Настройки слайдера</h3>
<div id="sliderSettings" style="padding: 20px; max-width: 400px; background: #f9f9f9a7; border: 1px solid #cccccc00; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
    <label style="display: block; margin-bottom: 10px;">
        <span style="font-family: 'Didot', serif; letter-spacing: 0.1em; display: block; margin-bottom: 5px;">Loop (по кругу):</span>
        <input type="checkbox" id="loop" checked>
    </label>
    <label style="display: block; margin-bottom: 10px;">
        <span style="font-family: 'Didot', serif; letter-spacing: 0.1em; display: block; margin-bottom: 5px;">Navs (стрелки):</span>
        <input type="checkbox" id="navs" checked>
    </label>
    <label style="display: block; margin-bottom: 10px;">
        <span style="font-family: 'Didot', serif; letter-spacing: 0.1em; display: block; margin-bottom: 5px;">Pags (пагинация):</span>
        <input type="checkbox" id="pags" checked>
    </label>
    <label style="display: block; margin-bottom: 10px;">
        <span style="font-family: 'Didot', serif; letter-spacing: 0.1em; display: block; margin-bottom: 5px;">Stop Mouse Hover (остановка при наведении):</span>
        <input type="checkbox" id="stopMouseHover" checked>
    </label>
    <label style="display: block; margin-bottom: 20px;">
        <span style="font-family: 'Didot', serif; letter-spacing: 0.1em; display: block; margin-bottom: 5px;">Delay (время между переключениями, сек):</span>
        <input type="range" id="delay" min="0" max="10" value="5" step="1" oninput="updateDelayLabel(this.value)">
        <span id="delayLabel" style="font-family: 'Didot', serif; margin-left: 10px;">5 сек</span>
    </label>
    <button type="button" id="applySettings" style="font-family: 'Didot', serif; letter-spacing: 0.1em; display: block; width: 100%; padding: 10px; background: #717579; color: #fff; border: none; border-radius: 5px; font-size: 16px; cursor: pointer;">
        Применить настройки
    </button>
</div>


<script>
 class Slider {
    constructor(options) {
        this.slides = document.querySelectorAll('.slide');
        this.totalSlides = this.slides.length;
        this.currentSlide = 0;
        this.loop = options.loop ?? true;
        this.navs = options.navs ?? true;
        this.pags = options.pags ?? true;
        this.delay = options.delay > 0 ? options.delay * 1000 : null; // 0 отключает авто
        this.stopMouseHover = options.stopMouseHover ?? true;

        this.autoSlideInterval = null; // Интервал автопереключения

        this.init();
    }

    init() {
        this.updateSlide();

        // Навигационные кнопки
        const prevButton = document.querySelector('.prev');
        const nextButton = document.querySelector('.next');
        if (this.navs) {
            prevButton.style.display = 'block';
            nextButton.style.display = 'block';
            this.initNavButtons();
        } else {
            prevButton.style.display = 'none';
            nextButton.style.display = 'none';
        }

        // Пагинация
        const pagination = document.querySelector('.pagination');
        if (this.pags) {
            pagination.style.display = 'flex';
            this.initPagination();
        } else {
            pagination.style.display = 'none';
        }

        // Автопереключение
        if (this.delay !== null) {
            this.startAutoSlide();
            if (this.stopMouseHover) {
                const sliderElement = document.querySelector('.slider');
                sliderElement.addEventListener('mouseover', () => this.stopAutoSlide());
                sliderElement.addEventListener('mouseout', () => this.startAutoSlide());
            }
        }
    }

    initNavButtons() {
        document.querySelector('.prev').addEventListener('click', () => this.prevSlide());
        document.querySelector('.next').addEventListener('click', () => this.nextSlide());
    }

    initPagination() {
        const pagination = document.querySelector('.pagination');
        pagination.innerHTML = '';
        for (let i = 0; i < this.totalSlides; i++) {
            const dot = document.createElement('span');
            dot.classList.add('dot');
            dot.addEventListener('click', () => this.gotoSlide(i));
            pagination.appendChild(dot);
        }
        this.updatePagination();
    }

    updateSlide() {
        document.querySelector('.slides').style.transform = `translateX(-${this.currentSlide * 100}%)`;
        document.querySelector('.slide-count').textContent = `${this.currentSlide + 1} / ${this.totalSlides}`;
        if (this.pags) this.updatePagination();
    }

    updatePagination() {
        const dots = document.querySelectorAll('.dot');
        dots.forEach(dot => dot.classList.remove('active'));
        if (dots[this.currentSlide]) {
            dots[this.currentSlide].classList.add('active');
        }
    }

    prevSlide() {
        this.currentSlide = (this.currentSlide > 0) ? this.currentSlide - 1 : (this.loop ? this.totalSlides - 1 : 0);
        this.updateSlide();
    }

    nextSlide() {
        this.currentSlide = (this.currentSlide < this.totalSlides - 1) ? this.currentSlide + 1 : (this.loop ? 0 : this.totalSlides - 1);
        this.updateSlide();
    }

    gotoSlide(index) {
        this.currentSlide = index;
        this.updateSlide();
    }

    startAutoSlide() {
        if (this.autoSlideInterval) clearInterval(this.autoSlideInterval);
        if (this.delay !== null) {
            this.autoSlideInterval = setInterval(() => this.nextSlide(), this.delay);
        }
    }

    stopAutoSlide() {
        if (this.autoSlideInterval) clearInterval(this.autoSlideInterval);
    }
}

// Обновление текста возле ползунка
function updateDelayLabel(value) {
    const label = document.getElementById('delayLabel');
    label.textContent = value === '0' ? 'Отключено' : `${value} сек`;
}

// Инициализация слайдера
let sliderInstance;
function initializeSlider() {
    const options = {
        loop: document.getElementById('loop').checked,
        navs: document.getElementById('navs').checked,
        pags: document.getElementById('pags').checked,
        stopMouseHover: document.getElementById('stopMouseHover').checked,
        delay: parseFloat(document.getElementById('delay').value),
    };

    if (sliderInstance) {
        sliderInstance.stopAutoSlide();
    }

    sliderInstance = new Slider(options);
}

document.getElementById('applySettings').addEventListener('click', initializeSlider);

document.addEventListener('DOMContentLoaded', () => {
    initializeSlider();
});

</script>





  

<h2 class="services-title">Наши услуги и предложения</h2>
<div class="services-container">
    <div class="service-card">
        <h3><a href="{% url 'catalog' 'with_driver' %}">Аренда автомобиля с водителем</a></h3>
        <hr class="divider-1">
        <p>Выберите автомобиль и арендуйте его с профессиональным водителем для максимального комфорта.</p>
    </div>
    <div class="service-card">
        <h3><a href="{% url 'catalog' 'without_driver' %}">Аренда автомобиля без водителя</a></h3>
        <hr class="divider-1">
        <p>Арендуйте автомобиль и наслаждайтесь свободой в дороге без необходимости водителя.</p>
    </div>
    <div class="service-card">
        <h3><a href="{% url 'catalog' 'suv' %}">Аренда с выездом за границей</a></h3>
        <hr class="divider-1">
        <p>Чтобы не испытывать дискомфорта в общественном транспорте и не заказывать такси, лучше взять автомобиль в прокат.</p>
    </div>
    <div class="service-card">
      <h3><a href="{% url 'catalog' 'limousine' %}">Долгосрочная аренда автомобиля</a></h3>
      <hr class="divider-1">
      <p>Претендовать на альтернативу личного транспорта вполне может услуга проката на несколько месяцев или целый год.</p>
  </div>
    <div class="service-card">
        <h3><a href="#lr1">Лабораторная №3 (Невошедшее)</a></h3>
        <hr class="divider-1">
        <p>Для проверки навыков.</p>
    </div>
</div> 
<br><br><br><br>





<div class="latest-news">
    {% if latest_news %}
        <a href="{% url 'news' %}" class="latest-news-item">
            <div class="latest-news-content">
                <h3>{{ latest_news.newscrat }}</h3>
                <p>{{ latest_news.news | slice:":120" }} ...</p>
            </div>
                <!-- Блок с изображением справа -->
    <div class="latest-news-image" style="background-image: url('{{ latest_news.newsimg.url }}');">
    </div>
        </a>
    {% else %}
        <p>Нет доступных новостей.</p><br>
    {% endif %}
</div><br><br>



















  <!--<br>
    <section class="features_index">
      <article class="index_1">
        <p>Московское время: {{ now|date:"d M Y H:i:s" }}</p><hr>
        <h1>Главная страница</h1>

        <div class="image-with-title">
          <div class="title-text">
              <h2>Аренда авто в Минске</h2>  Заголовок выше и больше <br>
              <p>Стиль и комфорт на дороге</p>  Текст под заголовком 
          </div>
          <img src="/media/static/bantic_1.jpg" alt="ProcatCar"/>
        </div>
      </article>-->
        <!-- Секция баннеров 
        {% if banners %} -->
        <!-- <h2>Баннеры:</h2>
        <article>
            {% for banner in banners %}
                <div style="margin-bottom: 20px;">
                    <img src="{{ banner.image.url }}" alt="{{ banner.title }}" width="1000" />
                </div>
            {% endfor %}
        </article>
        {% else %}
        <p>Нет доступных баннеров.</p>
        {% endif %} -->


        
        <!--<h3>Наши клиенты котики, поэтому вот ежедневные факты о котах</h3>
        <p>{{ fact }}</p>
        <img src="{{ cat_image_url }}" alt="Cute Cat" width="300"  /><br><br>-->


        <!-- Список компаний-партнеров -->
        
        <br><br><div class="partners-container">
            {% for partner in partners %}
                <a href="{{ partner.website }}" target="_blank" class="partner-block">
                    {% if partner.logo %}
                        <img src="{{ partner.logo.url }}" alt="{{ partner.name }}" class="partner-logo"/>
                    {% endif %}
                    <p class="partner-name">{{ partner.name }}</p>
                </a>
            {% endfor %}
        </div> 





        <br><br><hr style="margin-top: -10px;" class="divider"><br><br><br><br><br><br><br><br><br>




<h1 style="color:white"><p id="lr1">Лабораторная №3 (Невошедшее)</p></h1>

<section style="background-color: aliceblue;" align = "left">
<!--<h2>1. Прелаудер</h2>
 Бесконечно работающий прелоадер -->
<!-- Прелоадер внизу 
<div id="preloader">
    <div class="elegant-lines">
        <svg viewBox="0 0 120 120" class="infinity-path"> -->
            <!-- Путь в форме восьмерки 
            <path d="M60,30 C90,10 110,50 60,70 C10,90 30,130 60,110 C90,90 30,50 60,30" 
                  fill="none" stroke="url(#grad)" stroke-width="3" />
            <defs>
                <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:rgb(255,0,255);stop-opacity:1" />
                    <stop offset="100%" style="stop-color:rgb(0,0,255);stop-opacity:1" />
                </linearGradient>
            </defs>
        </svg>
    </div>
    <p>Загрузка<span id="dots"></span></p>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Реализуем анимацию для точек вручную через JavaScript
        const dotsElement = document.getElementById('dots');
        let dots = '';
        let count = 0;
    
        setInterval(() => {
            count = (count + 1) % 4;  // Цикл от 0 до 3
            dots = '.'.repeat(count);  // Генерируем точки
            dotsElement.textContent = dots;  // Меняем содержимое элемента
        }, 500);  // Интервал в 500 миллисекунд
    });
    </script> -->

    <hr>
<h2>1. Примеры анимации</h2><br>


<div class="rental-scene">
    <!-- Задний фон мегаполиса -->
    <div class="city-background"></div>

    <!-- Портал -->
    <div class="portal"></div>

    <!-- Человек -->
    <div class="person-1"></div>

    <!-- Автомобиль -->
    <div class="car-1"></div>

    <div class="nature-background"></div>

    <!-- Название компании -->
    <div class="company-name-1" style=" color: black ;font-family: 'Didot', serif; text-shadow: 10px 10px 10px rgba(1, 1, 1, 1);
    font-weight: lighter;
    letter-spacing: 0.1em;">Comfort Car</div>
</div>
<hr>

               <!-- Анимация -->
               <div class="animation-container">
                <div class="building">
                    <div class="door"></div>
                    <div class="person">
                        <div class="head"></div>
                        <div class="body"></div>
                    </div>
                </div>
                <div class="car">
                    <div class="car-body">
                      <div class="roof-rack"> 
                        <div class="window">
                            <div class="person-inside">
                                <div class="head-inside"></div>
                                <div class="body-inside"></div>
                            </div>
                        </div>
                      </div> 
                    </div>
                    <div class="headlights"></div>
                    <div class="wheel front-wheel"></div>
                    <div class="wheel back-wheel"></div>
                </div>
            </div>
        
            <h1 class="company-name"></h1>     
    


            <hr>
            <div class="dop" style="margin: 0; height: 60vh; background-color: #afa9a2a7; display: flex; justify-content: center; align-items: center;">
                <div class="animation-container-1">
                    <!-- Статичная картинка машины -->
                    <img src="/media/static/imcar.png" alt="Car" class="static-car">
                    
                    <!-- Объекты, которые будут "выглядывать" из-за машины -->
                    <div class="peek-object object1"><img src="/media/static/a1.png" alt="Object 1"></div>
                    <div class="peek-object object2"><img src="/media/static/a4.png" alt="Object 2"></div>
                    <div class="peek-object object3"><img src="/media/static/a6.png" alt="Object 3"></div>
                    <div class="peek-object object4"><img src="/media/static/a1.png" alt="Object 4"></div>
                    <div class="peek-object object5"><img src="/media/static/a2.png" alt="Object 5"></div>
                </div>
            </div>
        
            <script>
                // Получаем контейнер анимации и объекты
                const animationContainer = document.querySelector('.animation-container-1');
                const peekObjects = document.querySelectorAll('.peek-object');
                const car = document.querySelector('.static-car');
        
                // Обработчик события при наведении мыши
                animationContainer.addEventListener('mouseenter', () => {
                    // Показываем объекты, которые должны "выглядывать" из-за машины
                    peekObjects.forEach((object, index) => {
                        object.style.opacity = 1;
                        let offsetX = 0;
                        let offsetY = 0;
                        switch (index) {
                            case 0:
                                offsetX = -300;  // Влево
                                offsetY = -50;
                                break;
                            case 1:
                                offsetX = -250;   // Верхний левый угол
                                offsetY = -150;
                                break;
                            case 2:
                                offsetX = -70;     // Вверх
                                offsetY = -180;
                                break;
                            case 3:
                                offsetX = 70;    // Верхний правый угол
                                offsetY = -150;
                                break;
                            case 4:
                                offsetX = 180;   // Вправо
                                offsetY = -60;
                                break;
                        }
                        object.style.transform = `translate(${offsetX}px, ${offsetY}px)`; // перемещаем 
                    });
                });
        
                // Обработчик события при убирании мыши
                animationContainer.addEventListener('mouseleave', () => {
                    // Прячем объекты обратно за машину
                    peekObjects.forEach(object => {
                        object.style.opacity = 0;
                        object.style.transform = 'translate(0, 0)';  // Возвращаем объекты в центр
                    });
                });
            </script>

<hr>
<h2>2. Полигон </h2> <br>

<div style="text-align: center; margin-top: 20px;">
    <a href="{% url 'lr3' %}"  class="cta-button" style="
        padding: 15px 30px;
        font-size: 20px;
        background-color: rgb(100, 40, 40);
        color: #fff;
        text-decoration: none;
        border-radius: 8px;
        font-family: 'Brush Script MT', cursive;
        transition: background-color 0.3s ease;">
        Перейти на страницу полигона
    </a><br><br><br><br>

    <hr>
    <h2>3. Графики функции и её разложения в ряд</h2>

<!-- Ползунок для выбора числа членов ряда -->
<div style="text-align: center; margin-bottom: 15px;">
    <label for="termsRange" style="font-size: 16px; color: #444;">Количество членов ряда (n): </label>
    <input id="termsRange" type="range" min="1" max="50" value="10" step="1" oninput="updateTerms(this.value)">
    <span id="termsValue" style="font-size: 16px; font-weight: bold; color: #333;">10</span>
</div>

<!-- График 
элемент, на котором будет рисоваться график -->
<canvas id="functionChart" width="400" height="100"></canvas> 


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Функция для вычисления значения ряда
    function seriesValue(x, terms) {
        let sum = 0;
        for (let n = 0; n < terms; n++) {
            sum += Math.pow(x, n);
        }
        return sum;
    }

    // Генерация начальных данных
    const xValues = [];
    const step = 0.1;

    // Генерируем значения x от -0.9 до 0.9 с шагом 0.1 
    // Округляем x до 2 знаков после запятой и добавляем в массив
    for (let x = -0.9; x <= 0.9; x += step) {
        xValues.push(x.toFixed(2));
    }

    // Создание градиентов для линий
    const ctx = document.getElementById('functionChart').getContext('2d'); // чтобы получить контекст рисования
    const gradientBlue = ctx.createLinearGradient(0, 0, 400, 0); //  линейный градиент от начала до конца оси X
    gradientBlue.addColorStop(0, 'rgba(100, 150, 255, 1)');
    gradientBlue.addColorStop(1, 'rgba(173, 216, 230, 1)');

    const gradientRed = ctx.createLinearGradient(0, 0, 400, 0);
    gradientRed.addColorStop(0, 'rgba(255, 102, 102, 1)');
    gradientRed.addColorStop(1, 'rgba(255, 178, 178, 1)');

    // Создание фона
    const backgroundGradient = ctx.createLinearGradient(0, 0, 0, 250);
    backgroundGradient.addColorStop(0, 'rgba(240, 248, 255, 1)');
    backgroundGradient.addColorStop(1, 'rgba(220, 220, 220, 1)');

    // Создание графика
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: xValues,
            datasets: [
                {
                    label: 'Разложение в ряд',
                    data: xValues.map(x => seriesValue(parseFloat(x), 10)), //Вычисляем значения разложения в ряд для каждого x
                    borderColor: gradientBlue,
                    backgroundColor: 'rgba(100, 150, 255, 0.2)',
                    pointStyle: 'circle',
                    pointBackgroundColor: 'rgba(100, 150, 255, 0.8)',
                    pointRadius: 4,
                    hoverRadius: 6,
                    tension: 0.3,
                },
                {
                    label: 'Точная функция',
                    data: xValues.map(x => 1 / (1 - parseFloat(x))),
                    borderColor: gradientRed,
                    backgroundColor: 'rgba(255, 102, 102, 0.2)',
                    pointStyle: 'circle',
                    pointBackgroundColor: 'rgba(255, 102, 102, 0.8)',
                    pointRadius: 4,
                    hoverRadius: 6,
                    tension: 0.3, // используется для настройки сглаживания линий в линейных графиках
                }
            ]
        },
        options: {
    // Настраивает параметры графика
    responsive: true, // Делает график адаптивным к размеру контейнера
    plugins: {
        legend: {
            display: true, 
            position: 'top', // Указывает положение легенды (вверху)
            labels: {
                color: '#333', 
                font: {
                    size: 14, 
                }
            }
        },
        tooltip: {
            enabled: true, // Включает всплывающие подсказки при наведении
            callbacks: {
                // Кастомизация содержимого подсказки
                label: function(tooltipItem) {
                    const index = tooltipItem.dataIndex; // Индекс текущей точки
                    const x = xValues[index]; // Значение x для текущей точки
                    const exact = 1 / (1 - parseFloat(x)); // Точное значение функции
                    const approx = seriesValue(parseFloat(x), parseInt(document.getElementById('termsRange').value)); // Приближение функции (по ряду)
                    const diff = Math.abs(exact - approx).toFixed(5); // Разница между точным и приближенным значением
                    // Возвращает строки с информацией о текущей точке
                    return [
                        `x: ${x}`, // Значение x
                        `Точное значение: ${exact.toFixed(5)}`, // Точное значение функции
                        `Приближение: ${approx.toFixed(5)}`, // Приближенное значение функции
                        `Разница: ${diff}` // Разница между значениями
                    ];
                }
            },
            backgroundColor: 'rgba(50, 50, 50, 0.8)', // Цвет фона подсказки
            titleFont: { size: 14 }, 
            bodyFont: { size: 12 }, 
            bodyColor: '#fff', 
            borderWidth: 1, 
            borderColor: '#aaa' 
        }
    },
    animation: {
            duration: 1000, // Общая продолжительность анимации
           // easing: 'easeInOutQuart', // Плавное ускорение и замедление
            onProgress: function (animation) {
                // По мере прогресса анимации, отображаем точки по очереди
                const chartInstance = animation.chart;
                const datasetMeta = chartInstance.getDatasetMeta(0); // Работаем с первым набором данных
                datasetMeta.data.forEach((point, index) => {
                    if (animation.currentStep >= index) {
                        point.hidden = false; // Открываем точку
                    }
                });
            },
            onComplete: function (animation) {
                const chartInstance = animation.chart;
                const datasetMeta = chartInstance.getDatasetMeta(0); // Работаем с первым набором данных
                datasetMeta.data.forEach((point) => {
                    point.hidden = false; // Убеждаемся, что все точки отображены
                });
            }
        },
    scales: {
        // Настройка осей графика
        x: {
            title: {
                display: true, // Показывает заголовок оси X
                text: 'x', // Текст заголовка оси X
                color: '#444', // Цвет текста заголовка
                font: {
                    size: 14, // Размер шрифта заголовка
                }
            },
            grid: {
                color: 'rgba(200, 200, 200, 0.5)', // Цвет линий сетки для оси X
            }
        },
        y: {
            title: {
                display: true, // Показывает заголовок оси Y
                text: 'F(x)', // Текст заголовка оси Y
                color: '#444', // Цвет текста заголовка
                font: {
                    size: 14, // Размер шрифта заголовка
                }
            },
            grid: {
                color: 'rgba(200, 200, 200, 0.5)', // Цвет линий сетки для оси Y
            }
        }
    },
    layout: {
        // Общие настройки разметки
        padding: 10, // Внутренний отступ внутри графика
        backgroundColor: backgroundGradient, // Устанавливаем градиентный фон для графика
    }
}

    });

    // Обновление графика при изменении числа членов ряда
    function updateChart(chart, terms) {
        const seriesData = xValues.map(x => seriesValue(parseFloat(x), terms));
        const exactData = xValues.map(x => 1 / (1 - parseFloat(x)));

        chart.data.datasets[0].data = seriesData; // Обновляем данные ряда
        chart.data.datasets[1].data = exactData; // Точные значения остаются неизменными
        chart.update(); // Обновляем график
    }

    // Функция для обновления графика при изменении ползунка
    function updateTerms(terms) {
        document.getElementById('termsValue').innerText = terms; // Отображаем текущее значение n
        updateChart(chart, parseInt(terms)); // Обновляем график
    }

    /* Функция для сохранения графика как изображения
function saveChartAsImage(chart) {
    // Получаем изображение графика в формате base64
    const imageUrl = chart.toBase64Image();

    // Создаем ссылку для скачивания
    const link = document.createElement('a');
    link.href = imageUrl; // Устанавливаем изображение как источник ссылки
    link.download = 'chart.png'; // Устанавливаем имя файла для скачивания

    // Симулируем клик по ссылке, чтобы скачать файл
    link.click();
}

// Обработчик клика по кнопке для сохранения
document.getElementById('saveButton').addEventListener('click', () => {
    saveChartAsImage(chart); // Сохраняем график при клике на кнопку
    */
</script>

    <hr>
    <h1>4. Пример синтеза речи</h1>
    <div class="container">
        <label for="textInput">Введите текст или используйте голосовой ввод:</label>
<br><br>
        <!-- Поле для ввода текста -->
        <textarea id="textInput" placeholder="Введите текст..."></textarea>
<br>
        <!-- Кнопка для голосового ввода -->
        <button id="startVoiceInput" class="voice-btn">🎤 Голосовой ввод</button>
        <br><br>
        <!-- Кнопка для синтеза речи -->
        <button id="speakBtn">Произнести текст</button>
    </div>

    <script>
        // Функция синтеза речи
        function speakText(text) {
            if (!text) {
                alert("Пожалуйста, введите текст.");
                return;
            }

            const utterance = new SpeechSynthesisUtterance(text); // это объект, который используется для синтеза речи в браузере (в частности, через Web Speech API). Этот объект описывает фразу, которая будет произнесена с помощью API синтеза речи.
            utterance.lang = 'ru-RU'; // Устанавливаем русский язык
            utterance.pitch = 1;      // Тональность
            utterance.rate = 1;       // Скорость

            speechSynthesis.speak(utterance);
        }

        // Обработчик нажатия на кнопку "Произнести текст"
        document.getElementById('speakBtn').addEventListener('click', () => {
            const text = document.getElementById('textInput').value;
            speakText(text);
        });

        // Функция для голосового ввода
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'ru-RU'; // Устанавливаем русский язык

        // Обработчик нажатия на кнопку "Голосовой ввод"
        document.getElementById('startVoiceInput').addEventListener('click', () => {
            recognition.start();
        });

        // Слушаем результат голосового ввода - SpeechRecognition API
        recognition.onresult = (event) => { // обработчик события, который вызывается, когда распознавание речи завершено, и результат готов
            const spokenText = event.results[0][0].transcript;  // путь к строке текста, полученному в результате распознавания
            document.getElementById('textInput').value = spokenText;
        };

        // обработчик событий для ошибок, которые могут возникнуть при использовании SpeechRecognition
        recognition.onerror = (event) => {
            alert("Ошибка при голосовом вводе: " + event.error);
        };
    </script>


<hr>
    <h1>5. Фирма: Сотрудники</h1>

    <!-- Выбор варианта реализации (прототипное наследование или класс) -->
    <div class="custom-form-container">
        <h2>Выберите способ реализации</h2>
        <select id="inheritance-type">
            <option value="prototype">Прототипное наследование</option>
            <option value="class">Классы с extends</option>
        </select>
    </div>

    <!-- Форма добавления сотрудника -->
    <div class="custom-form-container">
        <h2>Добавить сотрудника</h2>
        <form id="employee-form">
            <input type="text" id="surname" placeholder="Фамилия" required>
            <input type="text" id="name" placeholder="Имя" required>
            <input type="text" id="patronymic" placeholder="Отчество" required>
            <input type="number" id="age" placeholder="Возраст" required>
            <input type="number" id="experience" placeholder="Стаж работы (в годах)" required>
            <button type="submit">Добавить сотрудника</button>
        </form>
    </div>

    <!-- Список всех сотрудников -->
    <div class="custom-result-container">
        <h2>Список сотрудников</h2>
        <ul id="employee-list" class="employee-list"></ul>
    </div>

    <!-- Список самых молодых сотрудников с опытом работы не менее 3 лет -->
    <div class="custom-result-container">
        <h2>Самые молодые сотрудники с опытом работы не менее 3 лет</h2>
        <ul id="youngest-employees-list" class="employee-list"></ul>
    </div>

    <script>
        // Базовый класс Employee для прототипного наследования в функциональном стиле
        function Employee(surname, name, patronymic, age, experience) { // ункция-конструктор, которая инициализирует свойства объекта
            this.surname = surname;
            this.name = name;
            this.patronymic = patronymic;
            this.age = age;
            this.experience = experience;
        }

        // Добавление геттеров и сеттеров для базового класса
        // экземпляры Employee будут разделять одну копию этих методов, экономя память
        Employee.prototype.getAge = function() {
            return this.age;
        };

        Employee.prototype.setAge = function(age) {
            this.age = age;
        };

        Employee.prototype.getExperience = function() {
            return this.experience;
        };

        Employee.prototype.setExperience = function(experience) {
            this.experience = experience;
        };

        Employee.prototype.displayEmployee = function() {
            return `${this.surname} ${this.name} ${this.patronymic}, Возраст: ${this.age}, Стаж работы: ${this.experience} лет`;
        };

function YoungEmployee1(surname, name, patronymic, age, experience, extraBonus) {
    Employee.call(this, surname, name, patronymic, age, experience); // Наследуем свойства
    this.extraBonus = extraBonus;
}

YoungEmployee1.prototype = Object1.create(Employee.prototype); // Наследуем методы
YoungEmployee1.prototype.constructor = YoungEmployee1;

// Переопределение метода
YoungEmployee1.prototype.displayEmployee1 = function() {
    return `${Employee1.prototype.displayEmployee.call(this)} (Доп. бонус: ${this.extraBonus})`;
};







        // Класс Employee для использования с конструкторами и extends
        class EmployeeClass {
            constructor(surname, name, patronymic, age, experience) {
                this.surname = surname;
                this.name = name;
                this.patronymic = patronymic;
                this.age = age;
                this.experience = experience;
            }

            // Геттеры и сеттеры для EmployeeClass
            getAge() {
                return this.age;
            }

            setAge(age) {
                this.age = age;
            }

            getExperience() {
                return this.experience;
            }

            setExperience(experience) {
                this.experience = experience;
            }

            // Метод отображения сотрудника
            displayEmployee() {
                return `${this.surname} ${this.name} ${this.patronymic}, Возраст: ${this.age}, Стаж работы: ${this.experience} лет`;
            }
        }

        // Класс YoungEmployee, наследующий от EmployeeClass
        class YoungEmployee extends EmployeeClass {
            constructor(surname, name, patronymic, age, experience, extraBonus) {
                super(surname, name, patronymic, age, experience); // Вызов конструктора родительского класса
                this.extraBonus = extraBonus;
            }

            // Метод отображения сотрудника с дополнительным бонусом
            displayEmployee() {
                return `${super.displayEmployee()} (Доп. бонус: ${this.extraBonus})`;
            }
        }

        // Класс для управления группой сотрудников
        class EmployeeGroup {
            constructor() {
                this.employees = [];
            }

            addEmployee(employee) {
                this.employees.push(employee);
            }

            // Функция для нахождения самых молодых сотрудников с опытом работы не менее 3 лет
            findYoungestEmployees() {
                let youngest = this.employees.filter(employee => employee.experience >= 3);
                // Сортировка по возрасту (младший возраст в начале)
                youngest.sort((a, b) => a.age - b.age);
                // Пытаемся выбрать только самого молодого сотрудника среди тех, кто с одинаковым стажем
                let minAge = youngest.length > 0 ? youngest[0].age : Infinity;
                return youngest.filter(employee => employee.age === minAge);
            }

            displayAllEmployees() {
                return this.employees.map(employee => employee.displayEmployee()).join('<br>');
            }

            displayYoungestEmployees() {
                let youngestEmployees = this.findYoungestEmployees();
                return youngestEmployees.map(employee => `<li class="employee-item">${employee.displayEmployee()}</li>`).join('');
            }
        }

        // Группа сотрудников
        const employeeGroup = new EmployeeGroup();

        // Обработчик выбора типа наследования
        let selectedType = 'prototype'; // По умолчанию прототипное наследование
        document.getElementById('inheritance-type').addEventListener('change', function(e) {
            selectedType = e.target.value;
        });

        // Обработчик формы для добавления сотрудника
        document.getElementById("employee-form").addEventListener("submit", function(e) {
            e.preventDefault();

            let surname = document.getElementById("surname").value;
            let name = document.getElementById("name").value;
            let patronymic = document.getElementById("patronymic").value;
            let age = parseInt(document.getElementById("age").value);
            let experience = parseInt(document.getElementById("experience").value);

            let newEmployee;

            // Добавляем сотрудника в зависимости от выбранного способа наследования
            if (selectedType === 'prototype') {
                newEmployee = new Employee(surname, name, patronymic, age, experience);
            } else if (selectedType === 'class') {
                if (age <= 30 && experience >= 3) {
                    newEmployee = new YoungEmployee(surname, name, patronymic, age, experience, "Молодой бонус");
                } else {
                    newEmployee = new EmployeeClass(surname, name, patronymic, age, experience);
                }
            }

            // Добавляем нового сотрудника в группу
            employeeGroup.addEmployee(newEmployee);

            // Обновляем отображение сотрудников
            document.getElementById("employee-list").innerHTML = `
                <strong>Список сотрудников (Тип: ${selectedType === 'prototype' ? 'Прототипное наследование' : 'Классы с extends'})</strong><br>
                ${employeeGroup.displayAllEmployees()}
            `;
            document.getElementById("youngest-employees-list").innerHTML = employeeGroup.displayYoungestEmployees();
        });
    </script>

<hr>
<div class="form-container">
    <h1>Введите вашу дату рождения</h1>
    <form id="birthdateForm">
        <input type="date" id="birthdate" class="form-input" required>
        <button type="submit" class="form-button">Подтвердить</button>
    </form>
    <br>
    <div id="result" class="result-message"></div>
</div>

<script>
    // Функция для вычисления возраста на основе даты рождения
    function calculateAge(dob) {
        let today = new Date();
        let birthDate = new Date(dob);
        let age = today.getFullYear() - birthDate.getFullYear();
        let month = today.getMonth() - birthDate.getMonth();
        if (month < 0 || (month === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    }

    // Обработчик отправки формы
    document.getElementById('birthdateForm').addEventListener('submit', function(event) {
        event.preventDefault(); // предотвращает стандартное поведение формы (перезагрузку страницы при отправке)

        let dob = document.getElementById('birthdate').value;
        let age = calculateAge(dob);

        // Получаем день недели
        let birthDate = new Date(dob);
        let daysOfWeek = ["Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"];
        let dayOfWeek = daysOfWeek[birthDate.getDay()];

        // Если несовершеннолетний, показываем alert
        if (age < 18) {
            alert("Вы несовершеннолетний. Необходимо разрешение родителей на использование сайта.");
            document.getElementById('result').innerHTML = ''; // Очищаем сообщение, если несовершеннолетний
        } else {
            // Если совершеннолетний, выводим информацию на странице
            let resultMessage = `Ваш возраст: ${age} лет. День недели введенной даты: ${dayOfWeek}.`;
            document.getElementById('result').innerHTML = resultMessage;
        }
    });
</script>


<hr>





 
<p class="ligatures-on" style ="text-align: center; font-family: 'Brush Script MT', cursive; font-size: 48px; color: rgb(100, 40, 40);
font-variant-ligatures: common-ligatures discretionary-ligatures">Made with love</p>
<p class="heart" style="text-align: center; font-family: 'Brush Script MT', cursive; font-size: 50px; color: rgb(100, 40, 40)">♥</p>
    </section>
    
{% endblock %}


{% block title %}Главная страница{% endblock %}
